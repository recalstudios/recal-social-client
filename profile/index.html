<!DOCTYPE html>

<html lang="en">
    <head>
        <!-- Metadata -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Stylesheets -->
        <link rel="stylesheet" type="text/css" href="/style/shared.css">
        <link rel="stylesheet" href="/style/profile.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

        <!-- SEO -->
        <link href="https://social.recalstudios.net/" rel="canonical">
        <title>Settings - Recal Social</title>

        <!-- Open graph link preview -->
        <meta property="og:title" content="Recal Social">
        <meta property="og:image" content="https://recalstudios.net/assets/brand/logo+color.png">
        <meta property="og:image:alt" content="Recal Social Logo">
        <meta property="og:site_name" content="RS">
        <meta property="og:link" content="https://social.recalstudios.net/">
        <meta property="og:url" content="https://social.recalstudios.net/">
        <meta property="og:description" content="Recal Studios chat app">
        <meta property="og:type" content="website">
    </head>
    <body>
        <!-- Header -->
        <div id="header">
            <a class="btn" href="/">Home</a>
            <div id="btn-box">
                <a class="btn" onclick="openDialog('Logout')">Log out</a>
                <a class="btn" onclick="openDialog('DeleteUser')">Delete account</a>
            </div>
        </div>

        <!-- Page content -->
        <div id="profile-content">
            <!-- Profile information -->
            <div id="profile">
                <!-- Profile picture -->
                <img id="pfp" src="/assets/default-icon.png" alt="Profile picture">

                <!-- User information -->
                <div class="userinfo form">
                    <!-- Username -->
                    <p class="userinfo italic darken-text small-margin-bottom">Username:</p>
                    <h2 id="username" class="information "></h2>

                    <!-- Input field for editing username -->
                    <label for="newUsername"></label>
                    <input name="newUsername" placeholder="New username" id="newUsername" class="inputUser" data-index="1">

                    <!-- Email address -->
                    <p class="userinfo italic darken-text small-margin-bottom">Email:</p>
                    <h2 id="email" class="information"></h2>

                    <!-- Input field for editing email address -->
                    <label for="newEmail"></label>
                    <input name="newEmail" placeholder="New email" id="newEmail" class="inputUser" data-index="2">

                    <!-- URL to profile picture -->
                    <p class="userinfo italic darken-text small-margin-bottom">Profile Pfp:</p>
                    <h2 id="pfpUrl" class="information "></h2>

                    <!-- Input field for editing profile picture URL -->
                    <label for="newPfp"></label>
                    <input name="profilePicture" placeholder="Paste picture link here" id="newPfp" class="inputUser" data-index="3">

                    <!-- Save changes button -->
                    <a class="btn inputUser change-user-submit" id="updateUser" onclick="updateUserInformation()" >Update profile</a>

                    <!-- Profile edit buttons -->
                    <div id="edit" class="">
                        <a class="btn information" onclick="edit('inputUser', 'flex', 'information', 'none')">Edit profile</a>
                        <a class="btn information" onclick="edit('userinfo', 'none', 'passwordInfo', 'flex')">Change Password</a>
                    </div>
                </div>

                <!-- Form for resetting passphrase -->
                <div class="passwordInfo form" id="passwordBox">
                    <!-- Current passphrase input -->
                    <label for="old-passphrase" class="italic darken-text">Current passphrase</label>
                    <input placeholder="Current passphrase" id="old-passphrase" type="password" data-index="1">

                    <!-- New passphrase input -->
                    <label for="new-passphrase" class="italic darken-text">New passphrase</label>
                    <input placeholder="New passphrase" id="new-passphrase" type="password" data-index="2">

                    <!-- Repeat new passphrase input -->
                    <label for="repeat-new-passphrase" class="italic darken-text">Repeat new passphrase</label>
                    <input placeholder="Repeat new passphrase" id="repeat-new-passphrase" type="password" data-index="3">

                    <!-- Save new passphrase button -->
                    <a class="btn change-password-submit submit" onclick="updatePassphrase()">Update Password</a>
                </div>
            </div>

            <!-- Privacy policy -->
            <a id="privacy-link" href="/privacy/" target="_blank" >Our Privacy Policy</a>
        </div>

        <!-- Account deletion confirmation dialog -->
        <dialog id="DeleteUser">
            <div class="popup">
                <p>Are you sure that you want to delete your account?</p>
                <div>
                    <a class="btn" onclick="deleteUser()">Delete</a>
                    <a class="btn" onclick="closeDialog('DeleteUser')">Close</a>
                </div>
            </div>
        </dialog>

        <!-- Logout dialog -->
        <dialog id="Logout">
            <div class="popup">
                <p>Do you want to log out all instances or just this one?</p>
                <div>
                    <a class="btn" onclick="logOut()">Log out</a>
                    <a class="btn" onclick="logOutAll()">Log out all</a>
                </div>
            </div>
        </dialog>

        <!-- Incorrect current passphrase error dialog (when changing passphrase) -->
        <dialog id="BadOldPassword">
            <div class="popup">
                <p>The old password is written wrong</p>
                <a class="btn" onclick="closeDialog('BadOldPassword')">Close</a>
            </div>
        </dialog>

        <!-- Passphrases do not match error dialog (when changing passphrase) -->
        <dialog id="BadNewPassword">
            <div class="popup">
                <p>The confirm password is not the same as the new password</p>
                <a class="btn" onclick="closeDialog('BadNewPassword')">Close</a>
            </div>
        </dialog>

        <!-- Missing information error dialog (when editing account info) -->
        <dialog id="MissingUserInfo">
            <div class="popup">
                <p>Don't leave any of the fields blank</p>
                <a class="btn" onclick="closeDialog('MissingUserInfo')">Close</a>
            </div>
        </dialog>

        <!-- Username or email already in use error dialog (when editing account info) -->
        <dialog id="AlreadyUsedInfo">
            <div class="popup">
                <p>The username or email is already in use</p>
                <a class="btn" onclick="closeDialog('AlreadyUsedInfo')">Close</a>
            </div>
        </dialog>

        <!-- External scripts -->
        <script type="text/javascript" src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

        <!-- Functional scripts -->
        <script src="/js/general.js"></script>
        <script src="/js/profile.js"></script>
    </body>
</html>
